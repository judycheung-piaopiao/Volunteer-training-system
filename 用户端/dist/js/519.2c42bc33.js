"use strict";(self["webpackChunktraining"]=self["webpackChunktraining"]||[]).push([[519],{8519:function(t,e,s){s.r(e),s.d(e,{default:function(){return _}});var n=s(3396),a=s(7139),l=s(9242);const c={class:"block-center"},o={class:"card"},i={class:"title-text"},u=(0,n.Uk)("必修"),r=(0,n.Uk)("已选"),d={class:"toRight"},h={class:"right-button"},m=["onClick"];function f(t,e,s,f,g,p){const v=(0,n.up)("van-nav-bar"),b=(0,n.up)("van-tag"),w=(0,n.up)("van-list");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(v,{title:"课程列表","left-text":"返回","left-arrow":"",onClickLeft:f.back},null,8,["onClickLeft"]),(0,n._)("div",c," 您目前还有"+(0,a.zw)(f.mustChoseNum)+"节必选课程未选 ",1),(0,n.Wm)(w,{loading:f.loading,"onUpdate:loading":e[0]||(e[0]=t=>f.loading=t),finished:f.finished,"finished-text":"没有更多了","error-text":"加载失败",onLoad:f.onLoad},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(f.courses.list,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"block"},[(0,n._)("div",o,[(0,n._)("div",i,(0,a.zw)(t.name),1),(0,n.wy)((0,n.Wm)(b,{class:"must-tag",plain:"",type:"danger"},{default:(0,n.w5)((()=>[u])),_:2},1536),[[l.F8,t.mustchose]]),(0,n.wy)((0,n.Wm)(b,{class:"selected-tag",plain:"",type:"primary"},{default:(0,n.w5)((()=>[r])),_:2},1536),[[l.F8,t.selected]]),(0,n.wy)((0,n._)("div",{class:"common-text"},"课程简介："+(0,a.zw)(t.description),513),[[l.F8,""!=t.description]]),(0,n._)("div",d,[(0,n._)("div",h,[(0,n._)("div",{onClick:e=>f.toclass(t.no),class:"commonButton"},"查看",8,m)])])])])))),128))])),_:1},8,["loading","finished","onLoad"])])}s(8146);var g=s(8135),p=s(4870),v=s(678);const b=s(6265);var w={name:"Select",setup(){const t=(0,p.iH)(!1),e=(0,p.iH)(!1),s=(0,v.tv)(),a=(0,v.yj)(),l=a.query.number,c=a.query.batchId,o=a.query.email,i=(0,p.iH)(0),u=(0,p.qj)({list:[]}),r=(0,p.qj)({list:[]}),d=a.query.pwd,h=a.query.username,m=a.query.start,f=a.query.end;function w(){b({method:"get",url:"student/checkselectedclass",params:{number:l}}).then((function(t){r.list=t.data})).catch((function(t){console.log("catch"+t),(0,g.Z)("获取班级信息失败，请检查网络")})),setTimeout((()=>{b({method:"get",url:"admin/getcourse",params:{batch:c}}).then((function(s){i.value=0;for(let t=0;t<s.data.length;t++)u.list.push(s.data[t]),u.list[t].selected=0,u.list[t].mustchose&&i.value++;for(let t=0;t<r.list.length;t++)for(let e=0;e<u.list.length;e++)if(r.list[t].course==u.list[e].no){u.list[e].selected=1,1==u.list[e].mustchose&&i.value--;break}t.value=!1,e.value=!0})).catch((function(t){console.log("catch"+t),(0,g.Z)("获取课程信息失败，请检查网络")}))}),100)}function k(t){s.push({path:"/selectclass",query:{number:l,courseid:t,email:o,pwd:d,username:h,batchId:c,start:m,end:f}})}(0,n.wF)((()=>{b({method:"get",url:"user/login",params:{username:h,password:d,userlevel:"1"}}).then((function(t){3==t.data.statuscode||s.push("/force")})).catch((function(t){console.log("catch"+t),(0,g.Z)("登陆失败，请检查网络")}))}));const y=()=>history.back(),_=()=>s.go(0);return{loading:t,finished:e,back:y,courses:u,number:l,toclass:k,onLoad:w,onMounted:n.bv,mustChoseNum:i,batchId:c,selected:r,refresh:_}}},k=s(89);const y=(0,k.Z)(w,[["render",f],["__scopeId","data-v-39b55580"]]);var _=y}}]);
//# sourceMappingURL=519.2c42bc33.js.map