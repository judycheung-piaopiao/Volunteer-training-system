{"version":3,"file":"js/524.686f0e68.js","mappings":"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","sources":["webpack://training/./src/components/mycourse.vue","webpack://training/./src/components/mycourse.vue?78d5"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-nav-bar\r\n      title=\"已选课程\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"back\"\r\n    />\r\n\r\n    <div class=\"block-center\">\r\n        必修：{{mustChoseNum*mustPoints}}/{{allMust*mustPoints}}学分&emsp;选修：{{selecChoseNum*selecPoints}}/{{allSelec*selecPoints}}学分\r\n    </div>\r\n    <div class=\"block-center\" v-show=\"isCoincidence\">\r\n        <span style=\"color:red;font-weight:bold;\">警告：您有课程时间重合，请检查并退改选</span>\r\n    </div>\r\n    <div class=\"block-center\" v-show=\"!flagin\">\r\n        <span style=\"color:red;font-weight:bold;\">当前不在选课时间内</span>\r\n    </div>\r\n    <!-- 课程列表 -->\r\n    <div>\r\n      <van-list\r\n        v-model:loading=\"loading\"\r\n        :finished=\"finished\"\r\n        finished-text=\"没有更多了\"\r\n        error-text=\"加载失败\"\r\n        @load=\"onLoad\"\r\n      >\r\n        <div v-for=\"item in selected.list\" :key=\"item\" class=\"block\">\r\n          <van-card class=\"vancard\">\r\n            <template #title>\r\n              <div class=\"courseText-top\">课程名称：{{item.coursename}}</div><br>\r\n              <div class=\"courseText\">班级名称：{{item.name}}</div><br>\r\n              <div class=\"courseText\">上课时间：{{item.time}}</div><br>\r\n              <div class=\"courseText\">上课地点：{{item.location}}</div><br>\r\n              <div class=\"courseText\">授课教师：{{item.teacherName}}</div><br>\r\n            </template>\r\n            <template #tags >\r\n            </template>\r\n            <template #footer>\r\n              <div class=\"tagtag\">\r\n                <van-tag plain type=\"primary\" >已报/上限: {{item.nowpeople}}/{{item.maxPeople}}</van-tag>\r\n              </div>\r\n              <div class=\"keButton\">\r\n                <div @click=\"tuikeconfirm(item.no)\" class=\"deleteButton\" >退课</div>\r\n              </div>\r\n              <!-- <img src=\"../../static/tuike.png\" class=\"keButton\" @click=\"tuikeconfirm(item.no)\" > -->\r\n            </template>\r\n          </van-card>\r\n        </div>\r\n      </van-list>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { ref,reactive,onBeforeMount,onMounted} from 'vue';\r\n  import { useRouter } from \"vue-router\";\r\n  import { useRoute } from \"vue-router\";\r\n  import { Toast,Dialog } from 'vant';\r\n  const axios = require('axios');\r\n\r\n  export default {\r\n    name: 'Select',\r\n    setup() {\r\n      const loading = ref(false);\r\n      const finished = ref(false);\r\n      const router = useRouter();\r\n      const route = useRoute();\r\n      const number= route.query.number;\r\n      const batchid= route.query.batchId;\r\n      const pwd = route.query.pwd;//接收密码\r\n      const username = route.query.username;//接收用户名\r\n      // const batchid= 3;\r\n      const email= route.query.email;\r\n      const courses = reactive({list:[]});//存储当前批次下的所有课程\r\n      const classes = reactive({list:[]});//存储当前课程下的所有班级\r\n      const selected = reactive({list:[]});//存储用户已选的班级\r\n      const mustChoseNum = ref(0);//统计已选课程中必修课程数量\r\n      const selecChoseNum = ref(0);//统计已选课程中选修课程数量\r\n      const allMust = ref(0);//必修课程的数量\r\n      const allSelec = ref(0);//选修课程的数量\r\n      const mustPoints = ref(2);//单个必修课程的学分\r\n      const selecPoints = ref(1);//单个选修课程的学分\r\n      const isCoincidence = ref(false);//是否有课程时间重复\r\n\r\n      const startTime = route.query.start;//二十四小时制，个位数前面加零，四位年份-月-日-时-分\r\n      const endTime = route.query.end;\r\n      const flagin = ref(0);//初值为不在选课时间内\r\n      \r\n      onBeforeMount(()=>{\r\n        //确认密码及用户名正确\r\n        axios({\r\n          method:'get',\r\n          url:'user/login',\r\n          params:{\r\n            username:username,\r\n            password:pwd,\r\n            userlevel:\"1\",\r\n          }\r\n        })\r\n        .then(function (response) {\r\n          if (response.data.statuscode==3) {\r\n            //密码正确\r\n          }else{\r\n            router.push('/force');//密码错误\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n            console.log(\"catch\"+error);\r\n            Toast('登陆失败，请检查网络');\r\n        });\r\n      })\r\n\r\n      //判断是否在选课时间内\r\n      function judgeTime() {\r\n        const mydate=new Date();\r\n        const year = String(mydate.getFullYear());\r\n        var month = String(mydate.getMonth()+1);\r\n        var day =String(mydate.getDate());\r\n        var hour =String(mydate.getHours());\r\n        var minute = String(mydate.getMinutes());\r\n        if (month.length==1) {\r\n          month=\"0\"+month;\r\n        }\r\n        if (day.length==1) {\r\n          day=\"0\"+day;\r\n        }\r\n        if (hour.length==1) {\r\n          hour=\"0\"+hour;\r\n        }\r\n        if (minute.length==1) {\r\n          minute=\"0\"+minute;\r\n        }\r\n        const startYear=startTime.slice(0,4);\r\n        const startMonth=startTime.slice(5,7);\r\n        const startDay=startTime.slice(8,10);\r\n        const startHour=startTime.slice(11,13);\r\n        const startMinute=startTime.slice(14,16);\r\n        const endYear=endTime.slice(0,4);\r\n        const endMonth=endTime.slice(5,7);\r\n        const endDay=endTime.slice(8,10);\r\n        const endHour=endTime.slice(11,13);\r\n        const endMinute=endTime.slice(14,16);\r\n        //console.log(year+\"-\"+month+\"-\"+day+\"-\"+hour+\"-\"+minute);\r\n        //console.log(startYear+\"-\"+startMonth+\"-\"+startDay+\"-\"+startHour+\"-\"+startMinute);\r\n        //console.log(endYear+\"-\"+endMonth+\"-\"+endDay+\"-\"+endHour+\"-\"+endMinute);\r\n        let flag1=0;//标识是否在开始时间之后\r\n        let flag2=0;//标识是否在结束时间之前\r\n        //判断是否在开始时间之后\r\n        if(year>startYear){\r\n          flag1=1;//在范围内\r\n        }else if(year==startYear){\r\n          if (month>startMonth) {\r\n            flag1=1;\r\n          }else if(month==startMonth){\r\n            if (day>startDay) {\r\n              flag1=1;\r\n            }else if(day==startDay){\r\n              if (hour>startHour) {\r\n                flag1=1;\r\n              }else if(hour==startHour){\r\n                if (minute>=startMinute) {\r\n                  flag1=1;\r\n                }else{\r\n                  flag1=0;\r\n                }\r\n              }else{\r\n                flag1=0;\r\n              }\r\n            }else{\r\n              flag1=0;\r\n            }\r\n          }else{\r\n            flag1=0;\r\n          }\r\n        }else{\r\n          flag1=0;\r\n        }\r\n        //判断是否在结束时间之前\r\n        if(year<endYear){\r\n          flag2=1;//在范围内\r\n        }else if(year==endYear){\r\n          if (month<endMonth) {\r\n            flag2=1;\r\n          }else if(month==endMonth){\r\n            if (day<endDay) {\r\n              flag2=1;\r\n            }else if(day==endDay){\r\n              if (hour<endHour) {\r\n                flag2=1;\r\n              }else if(hour==endHour){\r\n                if (minute<=endMinute) {\r\n                  flag2=1;\r\n                }else{\r\n                  flag2=0;\r\n                }\r\n              }else{\r\n                flag2=0;\r\n              }\r\n            }else{\r\n              flag2=0;\r\n            }\r\n          }else{\r\n            flag2=0;\r\n          }\r\n        }else{\r\n          flag2=0;\r\n        }\r\n        if (flag1&&flag2) {\r\n          flagin.value=1;\r\n        }else{\r\n          flagin.value=0;\r\n        }\r\n        // console.log(flagin.value);\r\n      }\r\n\r\n\r\n      onMounted(()=>{\r\n        judgeTime();\r\n      })\r\n\r\n      function onLoad(){\r\n        mustChoseNum.value=0;//统计必修课程数量\r\n        allMust.value=0;//所有必修课程的数量\r\n        let batch=0;\r\n        //获取学生所属批次\r\n        setTimeout(() =>{\r\n          axios({\r\n              method:'get',\r\n              url:'student/showbatch',\r\n              params:{\r\n                number:number,\r\n              }\r\n            })\r\n            .then(function (response) {\r\n              batch=response.data[0].no;\r\n            })\r\n            .catch(function (error) {\r\n                console.log(\"catch\"+error);\r\n                Toast('获取批次信息失败，请检查网络');\r\n            });\r\n        },100);\r\n        //获取已选班级列表\r\n        setTimeout(() =>{\r\n          axios({\r\n            method:'get',\r\n            url:'student/checkselectedclass',\r\n            params:{\r\n              number:number,\r\n            }\r\n          })\r\n          .then(function (res) {\r\n            selected.list=res.data//存储已选班级列表\r\n            //console.log(selected.list);\r\n          })\r\n          .catch(function (error) {\r\n              console.log(\"catch\"+error);\r\n              Toast('获取班级信息失败，请检查网络');\r\n          });\r\n        },200);\r\n\r\n        //获取当前批次下的所有课程列表\r\n        setTimeout(() =>{\r\n          axios({\r\n            method:'get',\r\n            url:'admin/getcourse',\r\n            params:{\r\n              batch:batchid,//这里原来是batchid\r\n            }\r\n          })\r\n          .then(function (response) {\r\n            courses.list=response.data;//存储当前批次下的所有课程的列表\r\n          })\r\n          .catch(function (error) {\r\n              console.log(\"catch\"+error);\r\n              Toast('获取课程信息失败，请检查网络');\r\n          });\r\n        },200);\r\n\r\n        setTimeout(() =>{\r\n          // console.log(courses.list.length);\r\n          for (let i = 0; i < courses.list.length; i++) \r\n          {\r\n            if (courses.list[i].mustchose) {//如果是必选课程\r\n              allMust.value++;//统计所有课程中必选课程的数量\r\n              // console.log(allMust.value);\r\n            }\r\n          }\r\n          // console.log(\"课程数量\"+courses.list.length);\r\n          // console.log(\"总必修数量\"+allMust.value);\r\n          allSelec.value = courses.list.length-allMust.value;//计算所有课程中选修课程的数量（课程数量-必修课程数量）\r\n          // console.log(\"selected.list.length\"+selected.list.length);\r\n          for (let i = 0; i < selected.list.length; i++) //遍历已选的班级\r\n          {\r\n            //确定班级所属课程名称及选修必修\r\n            const select = selected.list[i];\r\n            for (let k = 0; k < courses.list.length; k++) \r\n            {\r\n              const course = courses.list[k];\r\n              if (course.no==select.course) {\r\n                // console.log(\"course.no\"+course.no);\r\n                select.coursename=course.name;\r\n                select.must=course.mustchose;\r\n                if (select.must==1) {\r\n                  mustChoseNum.value++;//统计已选课程中必修课程的数量\r\n                }\r\n              }\r\n            }\r\n            //将班级名称中的时间提取出来分开显示\r\n            // for (let j = 0; j < selected.list[i].name.length; j++) \r\n            // {\r\n            //   const ch = selected.list[i].name[j];\r\n            //   if (ch=='/') {\r\n            //     selected.list[i].time=selected.list[i].name.slice(j+1);\r\n            //     selected.list[i].name=selected.list[i].name.slice(0,j);\r\n            //   }\r\n            // }\r\n          }\r\n          // console.log(\"已选课程数量\"+selected.list.length);\r\n          // console.log(\"已选必修课程数量\"+mustChoseNum.value);\r\n          selecChoseNum.value=selected.list.length-mustChoseNum.value;//统计已经选修的课程数量（已选课程数量-已选必修课程数量）\r\n          for (let i = 0; i < selected.list.length-1; i++) {\r\n            const time1 = selected.list[i].time;\r\n            for (let j = i+1; j < selected.list.length; j++) {\r\n              const time2 = selected.list[j].time;\r\n              if (time1==time2) {\r\n                isCoincidence.value=true;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        },500);\r\n        loading.value = false;\r\n        finished.value = true;\r\n      }\r\n\r\n      function tuikeconfirm(classid){\r\n        //退课确认框\r\n        if (flagin.value==0) {\r\n          Toast('不在选课时间内！');\r\n          return;\r\n        }else{\r\n          Dialog.confirm({\r\n            message:\r\n              '确认退课？',\r\n          })\r\n            .then(() => {\r\n              tuike(classid);\r\n            })\r\n            .catch(() => {\r\n              // on cancel\r\n            });\r\n        }\r\n        \r\n      }\r\n      \r\n      \r\n      function tuike(classid) {\r\n        let info={\r\n          number:number,\r\n          classes:classid,\r\n        }\r\n        axios({\r\n            method:'get',\r\n            url:'student/exitclass',\r\n            params:info,\r\n        })\r\n        .then(function (response) {\r\n          if (response.data.statuscode>=1) {\r\n            Toast('退课成功');\r\n            for (let i = 0; i <classes.list.length; i++) {\r\n              if (classes.list[i].no==classid) {\r\n                classes.list[i].selected=0;\r\n              }\r\n            }\r\n            router.go(0);\r\n          }else{\r\n            Toast('退课失败');\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n            console.log(\"catch\"+error);\r\n            Toast('退课失败，请检查网络');\r\n        });\r\n      }\r\n\r\n      function judgefull(Nowpeople,maxpeople){\r\n        if (Nowpeople>=maxpeople) {\r\n          return false;\r\n        }else{\r\n          return true;\r\n        }\r\n      }\r\n      const back = () => history.back();\r\n      const refresh = () =>router.go(0);\r\n      return {\r\n        loading,\r\n        finished,\r\n        back,\r\n        refresh,\r\n        classes,\r\n        number,\r\n        judgefull,\r\n        tuike,\r\n        onLoad,\r\n        courses,\r\n        selected,\r\n        mustChoseNum,\r\n        allMust,\r\n        allSelec,\r\n        mustPoints,\r\n        selecPoints,\r\n        selecChoseNum,\r\n        tuikeconfirm,\r\n        isCoincidence,\r\n        judgeTime,\r\n        flagin,\r\n      };\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  /*适应PC端 宽度大于900*/\r\n  @media screen and (min-width: 900px) {\r\n    .tagtag{\r\n      position: relative;\r\n      margin-right:80vw;\r\n      margin-bottom:-34px;\r\n    }\r\n    .deleteButton{\r\n      position: relative;\r\n      width:40px;\r\n      height:15px;\r\n      margin-left: calc(80vw + 73px);\r\n      margin-top: -35px;\r\n    }\r\n  }\r\n  /*适应pad端 宽度大于470,小于899px*/\r\n  @media screen and (min-width: 469px) and (max-width:899px) {\r\n    .tagtag{\r\n      position: relative;\r\n      margin-right:55vw;\r\n      margin-bottom:0px;\r\n      /* background-color:red ; */\r\n    }\r\n    .deleteButton{\r\n      position: relative;\r\n      width:40px;\r\n      height:15px;\r\n      margin-left: calc(60vw + 73px);\r\n      margin-top: -35px;\r\n    }\r\n  }\r\n  /*适应移动端*/\r\n  @media screen and (max-width: 469px){\r\n    .tagtag{\r\n      position: relative;\r\n      margin-right:43vw;\r\n      margin-bottom:-34px;\r\n    }\r\n    .deleteButton{\r\n      position: relative;\r\n      width:40px;\r\n      height:15px;\r\n      margin-left: calc(50vw + 73px);\r\n      margin-top: -35px;\r\n    }\r\n  }\r\n  .block{\r\n    height: 100%;\r\n    margin: 2%;\r\n    background-color: white;\r\n    border-radius: 10px;\r\n  }\r\n  .vancard{\r\n    margin:10px;\r\n    background-color: white;\r\n  }\r\n  .courseText{\r\n    font-size: 14px;\r\n    margin-top: -10px;\r\n  }\r\n  .courseText-top{\r\n    font-size: 14px;\r\n    margin-top: 15px;\r\n  }\r\n  .tagtag{\r\n    position: relative;\r\n    margin-bottom:-9.5%;\r\n    margin-right:25%;\r\n    /* margin-left: 20px; */\r\n  }\r\n  .tagtag2{\r\n    position: absolute;\r\n    margin-bottom:-10%;\r\n    /* margin-right:85%; */\r\n  }\r\n  .block-center{\r\n    position: relative;\r\n    height: 100%;\r\n    margin: 2%;\r\n    background-color: white;\r\n    border-radius: 10px;\r\n    text-align: center;\r\n    word-break: keep-all;\r\n  }\r\n</style>","import { render } from \"./mycourse.vue?vue&type=template&id=1e02df60&scoped=true\"\nimport script from \"./mycourse.vue?vue&type=script&lang=js\"\nexport * from \"./mycourse.vue?vue&type=script&lang=js\"\n\nimport \"./mycourse.vue?vue&type=style&index=0&id=1e02df60&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\DESKTOP\\\\HTML\\\\亚运会杭电志愿者培训\\\\training\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1e02df60\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_3","_hoisted_6","_createElementBlock","_createVNode","_component_van_nav_bar","title","onClickLeft","$setup","_toDisplayString","_hoisted_4","_hoisted_7","_component_van_list","loading","$event","finished","onLoad","_Fragment","_renderList","list","item","key","_component_van_card","coursename","name","_hoisted_11","time","_hoisted_13","location","_hoisted_15","teacherName","_hoisted_17","tags","footer","_component_van_tag","plain","type","nowpeople","maxPeople","onClick","no","_hoisted_20","axios","require","setup","ref","router","useRouter","route","useRoute","number","query","batchid","batchId","pwd","username","courses","email","reactive","classes","selected","mustChoseNum","selecChoseNum","allMust","allSelec","mustPoints","selecPoints","isCoincidence","startTime","start","endTime","end","flagin","judgeTime","mydate","Date","year","String","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","length","startYear","slice","startMonth","startDay","startHour","startMinute","endYear","endMonth","endDay","endHour","endMinute","flag1","flag2","value","batch","setTimeout","method","url","params","then","response","data","catch","error","console","log","res","i","mustchose","select","k","course","must","time1","j","time2","tuikeconfirm","classid","message","tuike","info","statuscode","go","judgefull","Nowpeople","maxpeople","onBeforeMount","password","userlevel","push","onMounted","back","history","refresh","__exports__","render"],"sourceRoot":""}