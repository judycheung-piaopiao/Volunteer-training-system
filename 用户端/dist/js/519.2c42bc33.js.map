{"version":3,"file":"js/519.2c42bc33.js","mappings":"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","sources":["webpack://training/./src/components/Courses.vue","webpack://training/./src/components/Courses.vue?355d"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-nav-bar\r\n      title=\"课程列表\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"back\"\r\n    />\r\n    <div class=\"block-center\">\r\n        您目前还有{{mustChoseNum}}节必选课程未选\r\n    </div>\r\n    <!-- <van-button @click=\"refresh\">刷新</van-button> -->\r\n    <!-- 课程列表 -->\r\n    <van-list\r\n      v-model:loading=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      error-text=\"加载失败\"\r\n      @load=\"onLoad\"\r\n    >\r\n      <div v-for=\"item in courses.list\" :key=\"item\" class=\"block\">\r\n        <div class=\"card\">\r\n          <div class=\"title-text\">{{item.name}}</div>\r\n          <!-- <div class=\"courseText\">授课老师：{{item.teachername}}</div> -->\r\n          <!-- <div class=\"courseText\">上课时间：{{item.time}}</div> -->\r\n          <van-tag class=\"must-tag\" plain type=\"danger\" v-show=\"item.mustchose\">必修</van-tag>\r\n          <van-tag class=\"selected-tag\" plain type=\"primary\" v-show=\"item.selected\">已选</van-tag>\r\n          <div class=\"common-text\" v-show=\"item.description!=''\">课程简介：{{item.description}}</div>\r\n          <div class=\"toRight\">\r\n            <div class=\"right-button\">\r\n              <div @click=\"toclass(item.no)\" class=\"commonButton\">查看</div>\r\n            </div>\r\n            <!-- <img src=\"../../static/enterButton.png\" class=\"right-button\" @click=\"toclass(item.no)\"> -->\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { ref,reactive,onMounted,onBeforeMount } from 'vue';\r\n  import { useRouter } from \"vue-router\";\r\n  import { useRoute } from \"vue-router\";\r\n  import { Toast } from 'vant';\r\n  const axios = require('axios');\r\n\r\n  export default {\r\n    name: 'Select',\r\n    setup() {\r\n      const loading = ref(false);\r\n      const finished = ref(false);\r\n      const router = useRouter();\r\n      const route = useRoute();\r\n      const number= route.query.number;\r\n      const batchId= route.query.batchId;\r\n      const email= route.query.email;\r\n      const mustChoseNum = ref(0);\r\n      const courses = reactive({list:[]});\r\n      const selected = reactive({list:[]});\r\n      const pwd = route.query.pwd;//接收密码\r\n      const username = route.query.username;//接收用户名\r\n      const start = route.query.start;\r\n      const end = route.query.end;\r\n\r\n\r\n      onBeforeMount(()=>{\r\n        //确认密码及用户名正确\r\n        axios({\r\n          method:'get',\r\n          url:'user/login',\r\n          params:{\r\n            username:username,\r\n            password:pwd,\r\n            userlevel:\"1\",\r\n          }\r\n        })\r\n        .then(function (response) {\r\n          if (response.data.statuscode==3) {\r\n            //密码正确\r\n          }else{\r\n            router.push('/force');//密码错误\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n            console.log(\"catch\"+error);\r\n            Toast('登陆失败，请检查网络');\r\n        });\r\n      })\r\n\r\n\r\n      //获取课程列表\r\n      function onLoad(){\r\n        //获取已选班级列表\r\n        axios({\r\n          method:'get',\r\n          url:'student/checkselectedclass',\r\n          params:{\r\n            number:number,\r\n          }\r\n        })\r\n        .then(function (res) {\r\n          // for (let i = 0; i < res.data.length; i++) {\r\n          //   selected.list.push(res.data[i]);\r\n          // }\r\n          selected.list=res.data;\r\n          //console.log(selected);\r\n        })\r\n        .catch(function (error) {\r\n            console.log(\"catch\"+error);\r\n            Toast('获取班级信息失败，请检查网络');\r\n        });\r\n        //console.log(selected);\r\n        setTimeout(() =>{\r\n          axios({\r\n            method:'get',\r\n            url:'admin/getcourse',\r\n            params:{\r\n              batch:batchId,\r\n            }\r\n          })\r\n          .then(function (response) {\r\n            //console.log(response.data);\r\n            mustChoseNum.value=0;\r\n            for (let i = 0; i < response.data.length; i++) {\r\n              courses.list.push(response.data[i]);\r\n              courses.list[i].selected=0;//默认未选\r\n              if (courses.list[i].mustchose) {//如果是必选课程\r\n                mustChoseNum.value++;\r\n              }\r\n            }\r\n            //console.log(\"mustChoseNum=\"+mustChoseNum.value);\r\n            //console.log(\"courses.list.length=\"+courses.list.length);\r\n            for (let i = 0; i < selected.list.length; i++) {\r\n              for (let j = 0; j< courses.list.length; j++) {\r\n                if (selected.list[i].course==courses.list[j].no) {\r\n                  courses.list[j].selected=1;//已选此课程\r\n                  if (courses.list[j].mustchose==1) {//如果此课是必选课程，那么未选的必选课程数量-1\r\n                    mustChoseNum.value--;\r\n                    //console.log(\"mustChoseNum=\"+mustChoseNum.value);\r\n                  }\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n            //console.log(mustChoseNum.value);\r\n            //console.log(selected);\r\n            loading.value = false;\r\n            finished.value = true;\r\n          })\r\n          .catch(function (error) {\r\n              console.log(\"catch\"+error);\r\n              Toast('获取课程信息失败，请检查网络');\r\n          });\r\n        },100);\r\n      }\r\n\r\n      function toclass(courseid) {\r\n        router.push({path:'/selectclass',query:{number:number,courseid:courseid,email:email,pwd:pwd,username:username,batchId:batchId,start:start,end:end}});\r\n      }\r\n\r\n      const back = () => history.back();\r\n      const refresh = () =>router.go(0); \r\n\r\n      return {\r\n        loading,\r\n        finished,\r\n        back,\r\n        courses,\r\n        number,\r\n        toclass,\r\n        onLoad,\r\n        onMounted,\r\n        mustChoseNum,\r\n        batchId,\r\n        selected,\r\n        refresh,\r\n      };\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .block-center{\r\n    position: relative;\r\n    height: 100%;\r\n    margin: 2%;\r\n    background-color: white;\r\n    border-radius: 10px;\r\n    text-align: center;\r\n    word-break: keep-all;\r\n  }\r\n  .block{\r\n    position: relative;\r\n    /* height: 150px; */\r\n    margin: 3%;\r\n    background-color: white;\r\n    border-radius: 10px;\r\n  }\r\n  .card{\r\n    position: relative;\r\n    padding: 15px 25px 10px 25px;\r\n  }\r\n  .title-text{\r\n    font-size: 17px;\r\n    padding-bottom: 5px;\r\n  }\r\n  .common-text{\r\n    font-size: 14px;\r\n    padding-top: 5px;\r\n  }\r\n  .must-tag{\r\n    position: relative;\r\n    margin-right: 8px;\r\n  }\r\n  .selected-tag{\r\n    position: relative;\r\n  }\r\n  .toRight{\r\n    text-align: right;\r\n  }\r\n  .right-button{\r\n    position: relative;\r\n    width: 60px;\r\n    height: auto;\r\n    margin-top: 2px;\r\n    margin-left: 85%;\r\n    transform: translate(-85%);\r\n    /* margin-left: 100%;\r\n    transform: translate(-60px); */\r\n  }\r\n</style>","import { render } from \"./Courses.vue?vue&type=template&id=39b55580&scoped=true\"\nimport script from \"./Courses.vue?vue&type=script&lang=js\"\nexport * from \"./Courses.vue?vue&type=script&lang=js\"\n\nimport \"./Courses.vue?vue&type=style&index=0&id=39b55580&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\DESKTOP\\\\HTML\\\\亚运会杭电志愿者培训\\\\training\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-39b55580\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createVNode","_component_van_nav_bar","title","onClickLeft","$setup","_createElementVNode","_toDisplayString","_component_van_list","loading","$event","finished","onLoad","_Fragment","_renderList","list","item","key","name","_component_van_tag","plain","type","mustchose","selected","description","onClick","no","_hoisted_8","axios","require","setup","ref","router","useRouter","route","useRoute","number","query","batchId","email","mustChoseNum","courses","reactive","pwd","username","start","end","method","url","params","then","res","data","catch","error","console","log","setTimeout","batch","response","value","i","length","push","j","course","toclass","courseid","path","onBeforeMount","password","userlevel","statuscode","back","history","refresh","go","onMounted","__exports__","render"],"sourceRoot":""}