{"version":3,"file":"js/676.4e894692.js","mappings":"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","sources":["webpack://training/./src/components/userLogin.vue","webpack://training/./src/components/userLogin.vue?cba3"],"sourcesContent":["<template>\r\n  <!--登陆界面（选择用户或管理员身份）--------------------------------------------------------------------------------------------- -->\r\n  <div class=\"div1\" >\r\n    <!-- <img src=\"../../static/logo.png\" alt=\"图片被销毁了哦\" height=\"200\" width=\"200\" class=\"image1\"> -->\r\n    <br><br>\r\n    <div class=\"buttonlogin\">\r\n      <van-form @submit=\"subPass()\" >\r\n        <van-cell-group inset>\r\n          <van-field v-model=\"login.username\" label=\"邮箱\" placeholder=\"请输入邮箱\" />\r\n          <van-field v-model=\"login.password\" type=\"password\" label=\"密码\" placeholder=\"请输入密码\" />\r\n          <van-radio-group v-model=\"login.userlevel\" direction=\"horizontal\" class=\"select\">\r\n            <!-- <van-radio name=\"1\">学生</van-radio> -->\r\n            <!-- <van-radio name=\"2\">老师</van-radio> -->\r\n            <!-- <van-radio name=\"3\">管理员</van-radio> -->\r\n          </van-radio-group>\r\n        </van-cell-group>\r\n        <div @click=\"subPass()\" class=\"commonButton\">登录</div>\r\n        <!-- <div class=\"submitButton\">\r\n          <div @click=\"subPass()\" class=\"commonButton\">登录</div>\r\n        </div> -->\r\n        <!-- <img src=\"../../static/loginButton.png\" class=\"submitButton\" @click=\"subPass()\"> -->\r\n      </van-form>\r\n      \r\n      <!-- <span class=\"pstext\">首次登录密码为您的志愿者编号</span> -->\r\n    </div>\r\n    <van-popup\r\n      v-model:show=\"show\"\r\n      round\r\n      position=\"bottom\"\r\n      :style=\"{ height: '30%' }\"\r\n    >\r\n      <van-form  class=\"newInfo\">\r\n        <van-cell-group inset>\r\n          <!-- <van-field v-model=\"newInfo.number\" label=\"学号\" placeholder=\"请输入学号\" /> -->\r\n          <van-field v-model=\"newInfo.password\" type=\"password\" label=\"密码\" placeholder=\"请输入密码\" />\r\n          <van-field v-model=\"newInfo.passwordAgain\" type=\"password\" label=\"确认密码\" placeholder=\"请再次输入密码\" />\r\n        </van-cell-group>\r\n        <img src=\"../../static/submitButton.png\" class=\"newButton\" @click=\"subNew()\">\r\n      </van-form>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { reactive, ref } from 'vue';\r\n  import { useRouter } from \"vue-router\";\r\n  import { Toast } from 'vant';\r\n\r\n  const axios = require('axios');\r\n\r\n  export default {\r\n    setup(){\r\n      const router = useRouter();\r\n      const flag=ref(false);//这里需要改为false才能正常判断用户名密码是否正确\r\n      const login=reactive({\r\n        username:\"\",\r\n        password:\"\",\r\n        userlevel:\"1\",\r\n      })\r\n      const newInfo=reactive({\r\n        // number:'',\r\n        password:'',\r\n        passwordAgain:'',\r\n      })\r\n\r\n      //修改密码弹出层\r\n      const show = ref(false);//这里需要改为false才能正常使用//这里设为false，因为未使用该组件\r\n\r\n      function subNew() {\r\n        if (newInfo.password!=newInfo.passwordAgain) {\r\n          Toast(\"密码输入不一致！请重新输入\");\r\n          newInfo.password='';\r\n          newInfo.passwordAgain='';\r\n          return;\r\n        }else{\r\n          axios({\r\n            method:'get',\r\n            url:'user/changepassword',\r\n            params:{\r\n              password:newInfo.password,\r\n            },\r\n          })\r\n          .then(function (response) {\r\n            if (response.data.statuscode==1) {\r\n              Toast('提交成功');\r\n              if(login.userlevel==1)//如果用户是学生\r\n              {\r\n                router.push({path:'/home',query:{number:login.username}});\r\n              }\r\n            }else if(response.data.statuscode==0){\r\n              Toast('提交失败');\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n              console.log(\"catch\"+error);\r\n              Toast('提交失败，请检查网络');\r\n          });\r\n        }\r\n        //console.log(newInfo);\r\n      }\r\n\r\n      function subPass(){\r\n        //判空\r\n        if (login.username==\"\"||login.password==\"\") {\r\n          Toast(\"请输入信息！\");\r\n          return;\r\n        }\r\n        //axios\r\n        axios({\r\n          method:'get',\r\n          url:'user/login',\r\n          params:login\r\n        })\r\n        .then(function (response) {\r\n          if (response.data.statuscode==3) {\r\n            flag.value=true;\r\n            Toast('登录成功');\r\n          }else if(response.data.statuscode==0){\r\n            flag.value=false;\r\n            Toast('输入错误');\r\n          }else if(response.data.statuscode==2){\r\n            flag.value=false;\r\n            Toast('未找到用户');\r\n          }else if(response.data.statuscode==1){\r\n            flag.value=false;\r\n            login.password='';\r\n            Toast('密码错误');\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n            console.log(\"catch\"+error);\r\n            Toast('登陆失败，请检查网络');\r\n        });\r\n        setTimeout(() =>{//延时\r\n          //flag.value=true;//正式上传需要注释此行\r\n          if(flag.value==true){\r\n            if(login.userlevel==1)//如果用户是学生\r\n            {\r\n              router.push({path:'/home',query:{email:login.username,pwd:login.password,username:login.username}});\r\n            }\r\n          }\r\n          // if (flag.value&&login.password!=login.username) {//登录成功并且用户名与密码不一致，说明不是首次登录\r\n          //   //console.log(\"登录成功！\");\r\n          //   if(login.userlevel==1)//如果用户是学生\r\n          //   {\r\n          //     router.push({path:'/home',query:{number:login.username}});\r\n          //   }\r\n          // }else if(login.password==login.username&&flag.value){//登录成功并且用户名与密码一致，说明是首次登录\r\n          //   show.value=true;\r\n          // }\r\n        },100);\r\n      }\r\n      return{\r\n        login,\r\n        subPass,\r\n        flag,\r\n        show,\r\n        newInfo,\r\n        subNew,\r\n      }   \r\n    }\r\n  }\r\n</script>\r\n<style scoped>\r\n  /*适应PC端 宽度大于1000px*/\r\n  @media screen and (min-width: 1000px) {\r\n    .buttonlogin{\r\n      width: 300px;\r\n      position: absolute;\r\n      margin-left: 50%; \r\n      margin-top: 15%;\r\n      /* background-color: red; */\r\n      transform: translate(-50%,-15%);\r\n      text-align: center;\r\n    }\r\n  }\r\n  /*适应pad端 宽度在640-1000之间*/\r\n  @media screen and (min-width: 640px) and (max-width: 1000px) {\r\n    .buttonlogin{\r\n      width: 300px;\r\n      position: absolute;\r\n      margin-left: 50%; \r\n      margin-top: 50%;\r\n      /* background-color: red; */\r\n      transform: translate(-50%,-50%);\r\n      text-align: center;\r\n    }\r\n  }\r\n  /*适应移动端 宽度小于640*/\r\n  @media screen and (max-width: 639px){\r\n    .buttonlogin{\r\n      width: 300px;\r\n      position: absolute;\r\n      margin-left: 50%; \r\n      margin-top: 50%;\r\n      /* background-color: red; */\r\n      transform: translate(-50%,-50%);\r\n      text-align: center;\r\n    }\r\n  }\r\n\r\n  .div1{\r\n    position: relative;\r\n    height: calc(100vh - 80px);\r\n    width: auto;\r\n    /* background-color: green; */\r\n  }\r\n  .image1{\r\n    position: absolute;\r\n    margin-left: 50%;\r\n    transform: translate(-50%);\r\n  }\r\n  /* .submitButton{\r\n    position: absolute;\r\n    width:150px;\r\n    height: 30px;\r\n    margin-top: 30px;\r\n    transform: translate(-50%);\r\n  }\r\n  .commonButton{\r\n    position: absolute;\r\n    width:120px;\r\n    height: 27px;\r\n    margin-top: 30px;\r\n    line-height: 27px;\r\n    transform: translate(-50%);\r\n    font-size: 19px;\r\n    font-weight: 550;\r\n  } */\r\n  /* .submintButton{\r\n    position: relative;\r\n    height: 200px;\r\n    margin-top: 100px;\r\n    margin-left: 50%;\r\n    transform: translate(-50%);\r\n    background-color: red;\r\n  } */\r\n  .commonButton{\r\n    position: absolute;\r\n    margin-left: 50%;\r\n    margin-top: 20px;\r\n    transform: translate(-50%);\r\n    width:120px;\r\n    height: 27px;\r\n    line-height: 27px;\r\n    font-size: 19px;\r\n    font-weight: 550;\r\n  }\r\n  .select{\r\n    margin-left: 45%; \r\n    transform: translate(-40%);\r\n  }\r\n  .newInfo{\r\n    margin-top: 10px;\r\n    position: relative;\r\n  }\r\n  .newButton{\r\n    position: absolute;\r\n    width:100px;\r\n    height: auto;\r\n    margin-left: 50%; \r\n    transform: translate(-50%);\r\n  }\r\n  .pstext{\r\n    position: relative;\r\n    font-size:15px;\r\n    color:gray;\r\n    word-break: keep-all;\r\n    /* margin-left:50%;\r\n    transform: translate(-50%); */\r\n  }\r\n</style>","import { render } from \"./userLogin.vue?vue&type=template&id=3c8fb94a&scoped=true\"\nimport script from \"./userLogin.vue?vue&type=script&lang=js\"\nexport * from \"./userLogin.vue?vue&type=script&lang=js\"\n\nimport \"./userLogin.vue?vue&type=style&index=0&id=3c8fb94a&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\DESKTOP\\\\HTML\\\\亚运会杭电志愿者培训\\\\training\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c8fb94a\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_2","_hoisted_3","_createVNode","_component_van_form","onSubmit","$setup","_component_van_cell_group","inset","_component_van_field","username","$event","label","placeholder","password","type","_component_van_radio_group","userlevel","direction","onClick","_component_van_popup","show","round","position","style","height","passwordAgain","src","_imports_0","axios","require","setup","router","useRouter","flag","ref","login","reactive","newInfo","subNew","method","url","params","then","response","data","statuscode","push","path","query","number","catch","error","console","log","subPass","value","setTimeout","email","pwd","__exports__","render"],"sourceRoot":""}