"use strict";(self["webpackChunktraining"]=self["webpackChunktraining"]||[]).push([[921],{2921:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var l=a(3396),o=a(7139),n=a(2289),d=a(4134),s=a(2335),c=a(5659),u=a(6835),i=a(4335);const r=e=>((0,l.dD)("data-v-6a204317"),e=e(),(0,l.Cn)(),e),m={class:"all"},h={class:"dialog"},p=r((()=>(0,l._)("div",{class:"dialog-font"},"请导入第一列为教师姓名，第二列为教师工号的无表头的Excel表格",-1))),f=r((()=>(0,l._)("img",{src:n,class:"dialog-button"},null,-1))),w={class:"dialog"},g={class:"courseText"},b=r((()=>(0,l._)("br",null,null,-1))),v={class:"courseText"},_=r((()=>(0,l._)("br",null,null,-1))),C={class:"courseText"},k=r((()=>(0,l._)("br",null,null,-1))),V={class:"courseText"},U=r((()=>(0,l._)("br",null,null,-1))),x=["onClick"],B=["onClick"],W=["onClick"],Z=["onClick"],y={class:"dialog"},L=["onClick"];function O(e,t,a,r,O,H){const D=(0,l.up)("van-nav-bar"),T=(0,l.up)("van-uploader"),q=(0,l.up)("van-dialog"),z=(0,l.up)("van-field"),A=(0,l.up)("van-cell-group"),I=(0,l.up)("van-form"),j=(0,l.up)("van-card"),R=(0,l.up)("van-list");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(D,{title:"批次列表","left-text":"退出","left-arrow":"",onClickLeft:r.back},null,8,["onClickLeft"]),(0,l._)("div",m,[(0,l._)("img",{src:n,class:"enterButton",onClick:t[0]||(t[0]=e=>r.showUploader=!0)}),(0,l.Wm)(q,{show:r.showUploader,"onUpdate:show":t[1]||(t[1]=e=>r.showUploader=e),"show-cancel-button":"",closeOnClickOverlay:!0,showCancelButton:!1,showConfirmButton:!1,width:"25vw"},{default:(0,l.w5)((()=>[(0,l._)("div",h,[p,(0,l.Wm)(T,{"after-read":r.afterRead},{default:(0,l.w5)((()=>[f])),_:1},8,["after-read"])])])),_:1},8,["show"]),(0,l._)("img",{src:d,class:"enterButton",onClick:t[2]||(t[2]=e=>r.showAdd=!0)}),(0,l.Wm)(q,{show:r.showAdd,"onUpdate:show":t[8]||(t[8]=e=>r.showAdd=e),"show-cancel-button":"",closeOnClickOverlay:!0,"confirm-button-text":"添加",showCancelButton:!1,showConfirmButton:!1,width:"25vw"},{default:(0,l.w5)((()=>[(0,l._)("div",w,[(0,l.Wm)(I,null,{default:(0,l.w5)((()=>[(0,l.Wm)(A,{inset:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{modelValue:r.add.name,"onUpdate:modelValue":t[3]||(t[3]=e=>r.add.name=e),label:"批次名称：",placeholder:"请输入名称"},null,8,["modelValue"]),(0,l.Wm)(z,{modelValue:r.add.starttime,"onUpdate:modelValue":t[4]||(t[4]=e=>r.add.starttime=e),label:"选课开始时间：",placeholder:"如2022-04-25-08-00"},null,8,["modelValue"]),(0,l.Wm)(z,{modelValue:r.add.endtime,"onUpdate:modelValue":t[5]||(t[5]=e=>r.add.endtime=e),label:"选课截止时间：",placeholder:"如2022-04-26-17-30"},null,8,["modelValue"]),(0,l.Wm)(z,{modelValue:r.add.describe,"onUpdate:modelValue":t[6]||(t[6]=e=>r.add.describe=e),label:"批次描述：",placeholder:"请输入描述",type:"textarea",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,l._)("img",{src:d,class:"enterButton",onClick:t[7]||(t[7]=e=>r.addBatch())})])),_:1})])])),_:1},8,["show"]),(0,l.Wm)(R,{loading:r.loading,"onUpdate:loading":t[9]||(t[9]=e=>r.loading=e),finished:r.finished,"finished-text":"没有更多了","error-text":"加载失败",onLoad:r.onLoad},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.batches.list,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e,class:"block"},[(0,l.Wm)(j,{class:"vancard"},{title:(0,l.w5)((()=>[(0,l._)("span",g,"批次名称："+(0,o.zw)(e.name),1),b,(0,l._)("span",v,"选课开始时间："+(0,o.zw)(e.starttime),1),_,(0,l._)("span",C,"选课结束时间："+(0,o.zw)(e.endtime),1),k,(0,l._)("span",V,"描述："+(0,o.zw)(e.describe),1),U])),footer:(0,l.w5)((()=>[(0,l._)("img",{src:s,class:"enterButton",onClick:t=>r.toCourse(e.no,e.name)},null,8,x),(0,l._)("img",{src:c,class:"enterButton",onClick:t=>r.tostuList(e.no)},null,8,B),(0,l._)("img",{src:u,class:"enterButton",onClick:t=>e.showUpdate=!0},null,8,W),(0,l._)("img",{src:i,class:"enterButton",onClick:t=>r.delconfirm(e.no)},null,8,Z),(0,l.Wm)(q,{show:e.showUpdate,"onUpdate:show":t=>e.showUpdate=t,"show-cancel-button":"",closeOnClickOverlay:!0,"confirm-button-text":"更新",showCancelButton:!1,showConfirmButton:!1,onClosed:r.refresh,width:"25vw"},{default:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l.Wm)(I,null,{default:(0,l.w5)((()=>[(0,l.Wm)(A,{inset:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,label:"批次名称：",placeholder:"请输入名称"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(z,{modelValue:e.starttime,"onUpdate:modelValue":t=>e.starttime=t,label:"选课开始时间：",placeholder:"如2022-04-25-08-00"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(z,{modelValue:e.endtime,"onUpdate:modelValue":t=>e.endtime=t,label:"选课截止时间：",placeholder:"如2022-04-26-17-30"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(z,{modelValue:e.describe,"onUpdate:modelValue":t=>e.describe=t,label:"批次描述：",placeholder:"请输入描述",type:"textarea",maxlength:"30","show-word-limit":""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l._)("img",{src:u,class:"enterButton",onClick:t=>r.update(e)},null,8,L)])),_:2},1024)])])),_:2},1032,["show","onUpdate:show","onClosed"])])),_:2},1024)])))),128))])),_:1},8,["loading","finished","onLoad"])])])}a(6542);var H=a(1321),D=(a(6743),a(4691)),T=a(4870),q=a(678);const z=a(6265);var A={name:"Home",setup(){const e=(0,q.tv)(),t=(0,q.yj)(),a=(0,T.iH)(!1),l=(0,T.iH)(!1),o=t.query.username,n=(0,T.qj)({list:[]}),d=(0,T.iH)({name:"",describe:"",starttime:"",endtime:""}),s=(0,T.iH)(!1),c=(0,T.iH)(!1);function u(){e.go(-1)}function i(){""!=d.value.name&&""!=d.value.describe&&""!=d.value.starttime&&""!=d.value.endtime?z({method:"get",url:"admin/createbatch",params:d.value}).then((t=>{t.data.statuscode>=1?((0,D.Z)("添加成功"),e.go(0)):(0,D.Z)("添加失败"),console.log(t.data.statuscode)})).catch((function(e){console.log("catch"+e),(0,D.Z)("添加失败，请检查网络")})):(0,D.Z)("请填写信息！")}function r(){z({method:"get",url:"admin/getbatch"}).then((e=>{for(let t=0;t<e.data.length;t++)n.list.push(e.data[t]),n.list[t].showUpdate=!1;a.value=!1,l.value=!0})).catch((function(e){console.log("catch"+e),(0,D.Z)("批次列表同步失败，请检查网络")}))}function m(t,a){e.push({path:"/courses",query:{batchId:t,batchname:a}})}function h(t){e.push({path:"/stuList",query:{batchId:t}})}function p(t){z({method:"get",url:"admin/deletebatch",params:{no:t}}).then((function(t){t.data.statuscode>=1?((0,D.Z)("删除成功"),e.go(0)):(0,D.Z)("删除失败")})).catch((function(e){console.log("catch"+e),(0,D.Z)("删除失败，请检查网络")}))}const f=t=>{let a=new FormData;a.append("file",t.file);let l={headers:{"Content-Type":"multipart/form-data"}};return new Promise(((t,o)=>{z({method:"post",url:"admin/importteacher",data:a,headers:l}).then((a=>{let l=0;for(let e=0;e<a.data.length;e++)0==a.data[e].statuscode&&l++;0!=l?(o(a.data),e.go(0),(0,D.Z)(`共有${l}位教师导入失败！`)):(t(a.data),e.go(0),(0,D.Z)("上传成功！"))})).catch((e=>{D.Z.fail("系统异常"),o(e)}))}))};function w(e){H.Z.confirm({closeOnClickOverlay:!0,message:"确认删除？"}).then((()=>{p(e)})).catch((()=>{}))}function g(t){z({method:"get",url:"admin/updatebatch",params:{batchid:t.no,name:t.name,describe:t.describe,starttime:t.starttime,endtime:t.endtime}}).then((function(t){1==t.data.statuscode?((0,D.Z)("更新成功"),e.go(0)):(0,D.Z)("更新失败")})).catch((function(e){console.log("catch"+e),(0,D.Z)("更新失败，请检查网络")}))}function b(){e.go(0)}const v=()=>history.back();return{loading:a,finished:l,back:v,batches:n,username:o,onLoad:r,toCourse:m,delBatch:p,tostuList:h,afterRead:f,addBatch:i,add:d,innertext:u,showUploader:s,showAdd:c,delconfirm:w,update:g,refresh:b}}},I=a(89);const j=(0,I.Z)(A,[["render",O],["__scopeId","data-v-6a204317"]]);var R=j},4134:function(e,t,a){e.exports=a.p+"img/addButton.a1bf7926.png"},6835:function(e,t,a){e.exports=a.p+"img/commit.be342ee0.png"},4335:function(e,t,a){e.exports=a.p+"img/deleteButton.948a50c3.png"},2335:function(e,t,a){e.exports=a.p+"img/enterButton.6b3eec9e.png"},5659:function(e,t,a){e.exports=a.p+"img/stuButton.323b7308.png"},2289:function(e,t,a){e.exports=a.p+"img/upteacher.11f26229.png"}}]);
//# sourceMappingURL=921.1649a776.js.map