{"version":3,"file":"js/587.49eaf5ae.js","mappings":"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","sources":["webpack://training/./src/components/stuList.vue","webpack://training/./src/components/stuList.vue?2fbf"],"sourcesContent":["<template>\n  <div>\n      <van-nav-bar\n        title=\"批次学生列表\"\n        left-text=\"返回\"\n        left-arrow\n        @click-left=\"back\"\n      />\n    <div class=\"all\">\n      <!-- 上传文件 -->\n      <img src=\"../../static/upstudent.png\" class=\"enterButton\" @click=\"showUploader=true\">\n      <van-dialog \n        v-model:show=\"showUploader\" \n        show-cancel-button \n        :closeOnClickOverlay=\"true\" \n        :showCancelButton=\"false\"\n        :showConfirmButton=\"false\"\n      >\n        <div class=\"dialog\">\n          <div class=\"dialog-font\">请导入第一列为志愿者编号，第二列为姓名，第三列为邮箱，第四列为学院 的无表头的Excel表格</div>\n          <van-uploader :after-read=\"afterRead\" >\n            <img src=\"../../static/upstudent.png\" class=\"dialog-button\">\n          </van-uploader>\n        </div>\n      </van-dialog>\n      \n      <!-- 通过输入志愿者编号删除学生 -->\n      <img src=\"../../static/deleteButton.png\" class=\"enterButton\" @click=\"showAdd=true\">\n      <van-dialog \n        v-model:show=\"showAdd\" \n        show-cancel-button \n        :closeOnClickOverlay=\"true\" \n        confirm-button-text='添加'\n        :showCancelButton=\"false\"\n        :showConfirmButton=\"false\"\n      >\n        <div class=\"dialog\">\n          <van-form >\n            <van-cell-group inset>\n              <van-field v-model=\"delNumber\" label=\"志愿者编号\" placeholder=\"请输入编号\"/>\n            </van-cell-group>\n            <img src=\"../../static/deleteButton.png\" class=\"enterButton\" @click=\"delStu(delNumber)\">\n          </van-form>\n        </div>\n      </van-dialog>\n      \n      <!-- 显示当前批次下学生 -->\n      <!-- <div style=\"color:gray;\">点击“删除”按钮在当前批次下删除该学生</div> -->\n      <van-list\n          v-model:loading=\"loading\"\n          :finished=\"finished\"\n          finished-text=\"没有更多了\"\n          error-text=\"加载失败\"\n          @load=\"onLoad\"\n        >\n          <div v-for=\"item in stu.list\" :key=\"item\" class=\"block\">\n            <van-card class=\"vancard\">\n              <template #title>\n                <span class=\"courseText\">姓名：{{item.name}}</span><br>\n                <span class=\"courseText\">邮箱：{{item.email}}</span><br>\n                <span class=\"courseText\">志愿者编号：{{item.number}}</span><br>\n                <span class=\"courseText\">志愿者序号：{{item.no}}</span><br>\n                <span class=\"courseText\">学院：{{item.academy}}</span><br>\n                <!-- <span class=\"courseText\">性别：{{item.sex}}</span><br> -->\n              </template>\n              <template #footer>\n                <img src=\"../../static/deleteButton.png\" class=\"enterButton\" @click=\"delconfirm(item.number)\">\n              </template>\n            </van-card>\n          </div>\n        </van-list>\n      </div>\n  </div>\n</template>\n\n<script>\nimport { ref,reactive,onMounted} from 'vue';\nimport { useRouter } from \"vue-router\";\nimport { useRoute } from 'vue-router';\nimport { Toast,Dialog } from 'vant';\nconst axios = require('axios');\n\nexport default {\n  name:'Home',\n  setup(){\n    const loading = ref(false);\n    const finished = ref(false);\n    const showUploader = ref(false);\n    const showAdd = ref(false);\n    const router = useRouter();\n    const route = useRoute();\n    const batchId= route.query.batchId;//接收批次信息\n    const stu=reactive({list:[]});\n    const delNumber=ref('');\n\n    const afterRead = (file) => {\n      //new 一个FormData格式的参数\n      let params = new FormData()\n      params.append('file', file.file)\n      params.append('bench',parseInt(batchId))\n      \n      let config = {\n        headers: { //添加请求头\n          'Content-Type': 'multipart/form-data'\n        }\n      }\n      //console.log(params);\n      return new Promise((resolve, reject) => {\n        axios({\n          method:'post',\n          url:'admin/importstudent', \n          data:params,\n          headers:config,\n          })\n        .then(res => {\n          //console.log(res);\n          let cnt=0;\n          for (let i = 0; i < res.data.length; i++) {\n            if (res.data[i].statuscode==0) {\n              cnt++;\n            }\n          }\n          if (cnt!=0) {\n            reject(res.data);\n            //router.go(0);\n            Toast(`共有${cnt}位学生导入失败！`);\n          }else{\n            resolve(res.data);\n            router.go(0)\n            Toast('上传成功！');\n          }\n        }).catch(err => {\n          Toast.fail('系统异常')\n          reject(err)\n        });\n      })\n    };\n\n\n    //加载学生列表\n    function onLoad(){\n      axios({\n            method:'get',\n            url:'admin/showstudent',\n            params:{\n              batch:parseInt(batchId),\n            }\n        })\n        .then(function (response) {\n          //console.log(response.data);\n          for (let i = 0; i < response.data.length; i++) {\n            stu.list.push(response.data[i]);\n          }\n          loading.value = false;\n          finished.value = true;\n        })\n        .catch(function (error) {\n            console.log(\"catch\"+error);\n            Toast('加载失败，请检查网络');\n        });\n    }\n\n    function delStu(number){\n      let info={\n        number:number,\n        batch:batchId,\n      }\n      axios({\n            method:'get',\n            url:'admin/deletestudent',\n            params:info,\n        })\n        .then(function (response) {\n          if(response.data.statuscode>=1){\n            Toast('删除成功');\n            router.go(0);\n          }else{\n            Toast('删除失败');\n          }\n        })\n        .catch(function (error) {\n            console.log(\"catch\"+error);\n            Toast('删除失败，请检查网络');\n        });\n    }\n\n    function delconfirm(number){\n        //删除确认框\n        Dialog.confirm({\n          closeOnClickOverlay:true,\n          message:\n            '确认删除？',\n        })\n          .then(() => {\n            delStu(number);\n          })\n          .catch(() => {\n            // on cancel\n          });\n    }\n\n    const back = () => history.back();\n    return{\n      loading,\n      finished,\n      back,\n      onMounted,\n      onLoad,\n      delStu,\n      batchId,\n      stu,\n      delNumber,\n      afterRead,\n      showUploader,\n      showAdd,\n      delconfirm,\n    };\n  },\n}\n</script>\n\n<style scoped>\n\n  .all {\n    margin-left: 15%;\n    margin-right: 15%;\n    margin-top: 20px;\n  }\n  .block{\n    height: 100%;\n    margin-left: 5%;\n    margin-right: 5%;\n    margin-top: 10px;\n    background-color: white;\n    border-radius: 20px;\n  }\n  .vancard{\n    margin:20px;\n    background-color: white;\n  }\n  .enterButton{\n    height:50px;\n    width:auto;\n  }\n  .font{\n    font-size: 20px;\n    word-break: keep-all;\n    color:gray;\n  }\n  .courseText{\n    font-size: 18px;\n  }\n  .dialog{\n    text-align: center;\n    padding: 20px;\n  }\n  .dialog-font{\n    word-break: keep-all;\n  }\n  .dialog-button{\n    position: relative;\n    height:50px;\n    width:auto;\n    margin-top: 20px;\n  }\n</style>","import { render } from \"./stuList.vue?vue&type=template&id=dabd4d1c&scoped=true\"\nimport script from \"./stuList.vue?vue&type=script&lang=js\"\nexport * from \"./stuList.vue?vue&type=script&lang=js\"\n\nimport \"./stuList.vue?vue&type=style&index=0&id=dabd4d1c&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\DESKTOP\\\\HTML\\\\亚运会杭电志愿者培训\\\\admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dabd4d1c\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","_createElementBlock","_createVNode","_component_van_nav_bar","title","onClickLeft","$setup","onClick","_component_van_dialog","show","$event","closeOnClickOverlay","showCancelButton","showConfirmButton","_hoisted_3","_component_van_uploader","_hoisted_4","_imports_1","_component_van_form","_component_van_cell_group","inset","_component_van_field","label","placeholder","_component_van_list","loading","finished","onLoad","_Fragment","_renderList","list","item","key","_component_van_card","_toDisplayString","name","email","_hoisted_9","number","_hoisted_11","no","_hoisted_13","academy","_hoisted_15","footer","axios","require","setup","ref","showUploader","showAdd","router","useRouter","route","useRoute","batchId","query","stu","reactive","delNumber","afterRead","file","params","FormData","append","parseInt","config","headers","Promise","resolve","reject","method","url","data","then","res","cnt","i","length","statuscode","go","catch","err","batch","response","push","value","error","console","log","delStu","info","delconfirm","message","back","history","onMounted","__exports__","render"],"sourceRoot":""}