"use strict";(self["webpackChunktraining"]=self["webpackChunktraining"]||[]).push([[587],{3587:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var a=n(3396),l=n(7139),o=n(8133),s=n(4335);const d=e=>((0,a.dD)("data-v-dabd4d1c"),e=e(),(0,a.Cn)(),e),c={class:"all"},u={class:"dialog"},r=d((()=>(0,a._)("div",{class:"dialog-font"},"请导入第一列为志愿者编号，第二列为姓名，第三列为邮箱，第四列为学院 的无表头的Excel表格",-1))),i=d((()=>(0,a._)("img",{src:o,class:"dialog-button"},null,-1))),h={class:"dialog"},m={class:"courseText"},f=d((()=>(0,a._)("br",null,null,-1))),p={class:"courseText"},w=d((()=>(0,a._)("br",null,null,-1))),g={class:"courseText"},b=d((()=>(0,a._)("br",null,null,-1))),v={class:"courseText"},_=d((()=>(0,a._)("br",null,null,-1))),k={class:"courseText"},C=d((()=>(0,a._)("br",null,null,-1))),x=["onClick"];function y(e,t,n,d,y,B){const W=(0,a.up)("van-nav-bar"),Z=(0,a.up)("van-uploader"),U=(0,a.up)("van-dialog"),H=(0,a.up)("van-field"),L=(0,a.up)("van-cell-group"),O=(0,a.up)("van-form"),T=(0,a.up)("van-card"),z=(0,a.up)("van-list");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(W,{title:"批次学生列表","left-text":"返回","left-arrow":"",onClickLeft:d.back},null,8,["onClickLeft"]),(0,a._)("div",c,[(0,a._)("img",{src:o,class:"enterButton",onClick:t[0]||(t[0]=e=>d.showUploader=!0)}),(0,a.Wm)(U,{show:d.showUploader,"onUpdate:show":t[1]||(t[1]=e=>d.showUploader=e),"show-cancel-button":"",closeOnClickOverlay:!0,showCancelButton:!1,showConfirmButton:!1},{default:(0,a.w5)((()=>[(0,a._)("div",u,[r,(0,a.Wm)(Z,{"after-read":d.afterRead},{default:(0,a.w5)((()=>[i])),_:1},8,["after-read"])])])),_:1},8,["show"]),(0,a._)("img",{src:s,class:"enterButton",onClick:t[2]||(t[2]=e=>d.showAdd=!0)}),(0,a.Wm)(U,{show:d.showAdd,"onUpdate:show":t[5]||(t[5]=e=>d.showAdd=e),"show-cancel-button":"",closeOnClickOverlay:!0,"confirm-button-text":"添加",showCancelButton:!1,showConfirmButton:!1},{default:(0,a.w5)((()=>[(0,a._)("div",h,[(0,a.Wm)(O,null,{default:(0,a.w5)((()=>[(0,a.Wm)(L,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{modelValue:d.delNumber,"onUpdate:modelValue":t[3]||(t[3]=e=>d.delNumber=e),label:"志愿者编号",placeholder:"请输入编号"},null,8,["modelValue"])])),_:1}),(0,a._)("img",{src:s,class:"enterButton",onClick:t[4]||(t[4]=e=>d.delStu(d.delNumber))})])),_:1})])])),_:1},8,["show"]),(0,a.Wm)(z,{loading:d.loading,"onUpdate:loading":t[6]||(t[6]=e=>d.loading=e),finished:d.finished,"finished-text":"没有更多了","error-text":"加载失败",onLoad:d.onLoad},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.stu.list,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"block"},[(0,a.Wm)(T,{class:"vancard"},{title:(0,a.w5)((()=>[(0,a._)("span",m,"姓名："+(0,l.zw)(e.name),1),f,(0,a._)("span",p,"邮箱："+(0,l.zw)(e.email),1),w,(0,a._)("span",g,"志愿者编号："+(0,l.zw)(e.number),1),b,(0,a._)("span",v,"志愿者序号："+(0,l.zw)(e.no),1),_,(0,a._)("span",k,"学院："+(0,l.zw)(e.academy),1),C])),footer:(0,a.w5)((()=>[(0,a._)("img",{src:s,class:"enterButton",onClick:t=>d.delconfirm(e.number)},null,8,x)])),_:2},1024)])))),128))])),_:1},8,["loading","finished","onLoad"])])])}n(6542);var B=n(1321),W=(n(6743),n(4691)),Z=n(4870),U=n(678);const H=n(6265);var L={name:"Home",setup(){const e=(0,Z.iH)(!1),t=(0,Z.iH)(!1),n=(0,Z.iH)(!1),l=(0,Z.iH)(!1),o=(0,U.tv)(),s=(0,U.yj)(),d=s.query.batchId,c=(0,Z.qj)({list:[]}),u=(0,Z.iH)(""),r=e=>{let t=new FormData;t.append("file",e.file),t.append("bench",parseInt(d));let n={headers:{"Content-Type":"multipart/form-data"}};return new Promise(((e,a)=>{H({method:"post",url:"admin/importstudent",data:t,headers:n}).then((t=>{let n=0;for(let e=0;e<t.data.length;e++)0==t.data[e].statuscode&&n++;0!=n?(a(t.data),(0,W.Z)(`共有${n}位学生导入失败！`)):(e(t.data),o.go(0),(0,W.Z)("上传成功！"))})).catch((e=>{W.Z.fail("系统异常"),a(e)}))}))};function i(){H({method:"get",url:"admin/showstudent",params:{batch:parseInt(d)}}).then((function(n){for(let e=0;e<n.data.length;e++)c.list.push(n.data[e]);e.value=!1,t.value=!0})).catch((function(e){console.log("catch"+e),(0,W.Z)("加载失败，请检查网络")}))}function h(e){let t={number:e,batch:d};H({method:"get",url:"admin/deletestudent",params:t}).then((function(e){e.data.statuscode>=1?((0,W.Z)("删除成功"),o.go(0)):(0,W.Z)("删除失败")})).catch((function(e){console.log("catch"+e),(0,W.Z)("删除失败，请检查网络")}))}function m(e){B.Z.confirm({closeOnClickOverlay:!0,message:"确认删除？"}).then((()=>{h(e)})).catch((()=>{}))}const f=()=>history.back();return{loading:e,finished:t,back:f,onMounted:a.bv,onLoad:i,delStu:h,batchId:d,stu:c,delNumber:u,afterRead:r,showUploader:n,showAdd:l,delconfirm:m}}},O=n(89);const T=(0,O.Z)(L,[["render",y],["__scopeId","data-v-dabd4d1c"]]);var z=T},4335:function(e,t,n){e.exports=n.p+"img/deleteButton.948a50c3.png"},8133:function(e,t,n){e.exports=n.p+"img/upstudent.fa3977ea.png"}}]);
//# sourceMappingURL=587.49eaf5ae.js.map