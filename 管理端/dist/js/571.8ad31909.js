"use strict";(self["webpackChunktraining"]=self["webpackChunktraining"]||[]).push([[571],{571:function(e,l,a){a.r(l),a.d(l,{default:function(){return D}});var o=a(3396),t=a(7139),n=a(4134),d=a(5659),c=a(6835),s=a(4335);const u=e=>((0,o.dD)("data-v-781fc8ea"),e=e(),(0,o.Cn)(),e),i={class:"all"},m={class:"dialog"},r={class:"courseText"},p=u((()=>(0,o._)("br",null,null,-1))),h={class:"courseText"},f=u((()=>(0,o._)("br",null,null,-1))),g={class:"courseText"},w=u((()=>(0,o._)("br",null,null,-1))),v={class:"courseText"},V=u((()=>(0,o._)("br",null,null,-1))),b={class:"courseText"},x=u((()=>(0,o._)("br",null,null,-1))),_=u((()=>(0,o._)("img",{src:d,class:"enterButton"},null,-1))),C=["onClick"],U=["onClick"],k={class:"dialog"},W=["onClick"];function Z(e,l,a,d,u,Z){const y=(0,o.up)("van-nav-bar"),H=(0,o.up)("van-field"),N=(0,o.up)("van-cell-group"),B=(0,o.up)("van-form"),T=(0,o.up)("van-dialog"),j=(0,o.up)("van-tag"),q=(0,o.up)("vue3-json-excel"),z=(0,o.up)("van-card"),D=(0,o.up)("van-list");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(y,{title:"班级列表","left-text":d.navbarstr,"left-arrow":"",onClickLeft:d.back},null,8,["left-text","onClickLeft"]),(0,o._)("div",i,[(0,o._)("img",{src:n,class:"enterButton",onClick:l[0]||(l[0]=e=>d.showAdd=!0)}),(0,o.Wm)(T,{show:d.showAdd,"onUpdate:show":l[8]||(l[8]=e=>d.showAdd=e),"show-cancel-button":"",closeOnClickOverlay:!0,"confirm-button-text":"添加",showCancelButton:!1,showConfirmButton:!1,width:"25vw"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(N,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(H,{modelValue:d.add.name,"onUpdate:modelValue":l[1]||(l[1]=e=>d.add.name=e),label:"班级名称：",placeholder:"请输入名称"},null,8,["modelValue"]),(0,o.Wm)(H,{modelValue:d.add.time,"onUpdate:modelValue":l[2]||(l[2]=e=>d.add.time=e),label:"上课时间：",placeholder:"请输入上课时间"},null,8,["modelValue"]),(0,o.Wm)(H,{modelValue:d.add.location,"onUpdate:modelValue":l[3]||(l[3]=e=>d.add.location=e),label:"上课地点：",placeholder:"请输入地点"},null,8,["modelValue"]),(0,o.Wm)(H,{modelValue:d.add.teacherno,"onUpdate:modelValue":l[4]||(l[4]=e=>d.add.teacherno=e),label:"教师工号：",placeholder:"请输入教师工号"},null,8,["modelValue"]),(0,o.Wm)(H,{modelValue:d.add.teachername,"onUpdate:modelValue":l[5]||(l[5]=e=>d.add.teachername=e),label:"教师姓名：",placeholder:"请输入教师姓名"},null,8,["modelValue"]),(0,o.Wm)(H,{modelValue:d.add.maxpeople,"onUpdate:modelValue":l[6]||(l[6]=e=>d.add.maxpeople=e),label:"最大人数：",placeholder:"请输入最大人数"},null,8,["modelValue"])])),_:1}),(0,o._)("img",{src:n,class:"dialog-enterbutton",onClick:l[7]||(l[7]=e=>d.addClass())})])),_:1})])])),_:1},8,["show"]),(0,o.Wm)(D,{loading:d.loading,"onUpdate:loading":l[9]||(l[9]=e=>d.loading=e),finished:d.finished,"finished-text":"没有更多了","error-text":"加载失败",onLoad:d.onLoad},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.classes.list,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:"block"},[(0,o.Wm)(z,{class:"vancard"},{title:(0,o.w5)((()=>[(0,o._)("span",r,"班级名称："+(0,t.zw)(e.name),1),p,(0,o._)("span",h,"上课时间："+(0,t.zw)(e.time),1),f,(0,o._)("span",g,"上课地点："+(0,t.zw)(e.location),1),w,(0,o._)("span",v,"教师工号："+(0,t.zw)(e.teacherNo),1),V,(0,o._)("span",b,"教师姓名："+(0,t.zw)(e.teacherName),1),x])),tags:(0,o.w5)((()=>[(0,o.Wm)(j,{style:{"margin-top":"8px"},plain:"",type:"danger"},{default:(0,o.w5)((()=>[(0,o.Uk)("已报/上限: "+(0,t.zw)(e.nowpeople)+"/"+(0,t.zw)(e.maxPeople),1)])),_:2},1024)])),footer:(0,o.w5)((()=>[(0,o.Wm)(q,{"json-data":e.stulist,name:e.excelFileName,fields:d.excelDataFields,footer:d.footer,header:e.excelFileName,onClick:l=>d.downloadJudge(e.stulist.length)},{default:(0,o.w5)((()=>[_])),_:2},1032,["json-data","name","fields","footer","header","onClick"]),(0,o._)("img",{src:c,class:"enterButton",onClick:l=>e.showUpdate=!0},null,8,C),(0,o._)("img",{src:s,class:"enterButton",onClick:l=>d.delconfirm(e.no)},null,8,U),(0,o.Wm)(T,{show:e.showUpdate,"onUpdate:show":l=>e.showUpdate=l,"show-cancel-button":"",closeOnClickOverlay:!0,"confirm-button-text":"更新",showCancelButton:!1,showConfirmButton:!1,onClosed:d.refresh,width:"25vw"},{default:(0,o.w5)((()=>[(0,o._)("div",k,[(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(N,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(H,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,label:"班级名称：",placeholder:"请输入名称"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(H,{modelValue:e.time,"onUpdate:modelValue":l=>e.time=l,label:"上课时间：",placeholder:"请输入上课时间"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(H,{modelValue:e.location,"onUpdate:modelValue":l=>e.location=l,label:"上课地点：",placeholder:"请输入地点"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(H,{modelValue:e.teacherNo,"onUpdate:modelValue":l=>e.teacherNo=l,label:"教师工号：",placeholder:"请输入教师工号"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(H,{modelValue:e.teacherName,"onUpdate:modelValue":l=>e.teacherName=l,label:"教师姓名：",placeholder:"请输入教师姓名"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(H,{modelValue:e.maxPeople,"onUpdate:modelValue":l=>e.maxPeople=l,label:"最大人数：",placeholder:"请输入最大人数"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o._)("img",{src:c,class:"dialog-enterbutton",onClick:l=>d.update(e)},null,8,W)])),_:2},1024)])])),_:2},1032,["show","onUpdate:show","onClosed"])])),_:2},1024)])))),128))])),_:1},8,["loading","finished","onLoad"])])])}a(6542);var y=a(1321),H=(a(6743),a(4691)),N=a(4870),B=a(678);const T=a(6265);var j={name:"Home",setup(){const e=(0,N.iH)(""),l=(0,N.iH)(!1),a=(0,N.iH)(!1),t=(0,N.iH)("返回"),n=(0,N.iH)(3),d=(0,N.iH)("12:00"),c=(0,N.iH)("12:00"),s=(0,N.iH)(!1),u=(0,N.iH)(!1),i=(0,B.tv)(),m=(0,B.yj)(),r=m.query.courseId,p=m.query.coursename,h=m.query.batchname,f=(0,N.qj)({list:[]}),g=(0,N.iH)({time:"",location:"",teacherno:"",teachername:"",maxpeople:"",course:r,note:"",name:""}),w="",v=(0,N.qj)({"姓名":"name","志愿者编号":"number"}),V="学生列表",b=(0,N.qj)({list:[]});t.value=t.value+"------"+p;const x=e=>`${e.getYear()+1900}-${e.getMonth()+1}-${e.getDate()}`,_=a=>{l.value=!1,e.value=x(a)};function C(){T({method:"get",url:"admin/getclass",params:{course:parseInt(r)}}).then((function(e){for(let l=0;l<e.data.length;l++)f.list.push(e.data[l]),f.list[l].showUpdate=!1;s.value=!1,u.value=!0})).catch((function(e){console.log("catch"+e),(0,H.Z)("加载失败，请检查网络")})),setTimeout((()=>{for(let e=0;e<f.list.length;e++){const l=f.list[e].no;f.list[e].excelFileName="学生列表-"+h+"-"+p+"-"+f.list[e].name,T({method:"get",url:"admin/getstudentbyclass",params:{classid:l}}).then((function(l){f.list[e].stulist=l.data})).catch((function(e){console.log("catch"+e),(0,H.Z)("获取学生失败，请检查网络")}))}}),100)}function U(e){i.push({path:"/teach",query:{classId:e}})}function k(e){T({method:"get",url:"admin/deleteclass",params:{no:e}}).then((e=>{e.data.statuscode>=1?((0,H.Z)("删除成功"),i.go(0)):(0,H.Z)("删除失败")})).catch((function(e){console.log("catch"+e),(0,H.Z)("删除失败，请检查网络")}))}function W(){""!=g.value.time&&""!=g.value.name&&""!=g.value.location&&""!=g.value.teacherno&&""!=g.value.teachername&&""!=g.value.maxpeople?T({method:"get",url:"admin/addclass",params:g.value}).then((e=>{e.data.statuscode>=1?((0,H.Z)("添加成功"),i.go(0)):(0,H.Z)("添加失败")})).catch((function(e){console.log("catch"+e),(0,H.Z)("添加失败，请检查网络")})):(0,H.Z)("请填写信息！")}function Z(e){y.Z.confirm({closeOnClickOverlay:!0,message:"确认删除？"}).then((()=>{k(e)})).catch((()=>{}))}function j(e){T({method:"get",url:"admin/updateclass",params:{classid:e.no,name:e.name,location:e.location,teacherno:e.teacherNo,teachername:e.teacherName,maxpeople:e.maxPeople,time:e.time}}).then((function(e){1==e.data.statuscode?((0,H.Z)("更新成功"),i.go(0)):(0,H.Z)("更新失败")})).catch((function(e){console.log("catch"+e),(0,H.Z)("更新失败，请检查网络")}))}function q(e){0==e&&(0,H.Z)("无学生选择该班级")}function z(){i.go(0)}const D=()=>history.back();return{downloadJudge:q,json_data:b,excelDataFields:v,excelFileName:V,footer:w,loading:s,finished:u,back:D,onMounted:o.bv,courseId:r,onLoad:C,delClass:k,add:g,addClass:W,toTeach:U,classes:f,date:e,show:l,timeSelect:n,startTime:d,endTime:c,onConfirm:_,navbarstr:t,showAdd:a,delconfirm:Z,delClass:k,update:j,refresh:z}}},q=a(89);const z=(0,q.Z)(j,[["render",Z],["__scopeId","data-v-781fc8ea"]]);var D=z},4134:function(e,l,a){e.exports=a.p+"img/addButton.a1bf7926.png"},6835:function(e,l,a){e.exports=a.p+"img/commit.be342ee0.png"},4335:function(e,l,a){e.exports=a.p+"img/deleteButton.948a50c3.png"},5659:function(e,l,a){e.exports=a.p+"img/stuButton.323b7308.png"}}]);
//# sourceMappingURL=571.8ad31909.js.map